<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimal-ui" />
    <title>Infima</title>
    <style>
      .main .section {
        margin: 6rem auto;
      }

      .main .section > .row:not(:first-child) {
        margin-top: 2rem;
      }

      .main .section > .row:not(:last-child) {
        margin-bottom: 2rem;
      }

      @media (max-width: 1024px) {
        .main .section > .row > [class^='col']:not(:last-child) {
          padding-bottom: 1rem;
        }
      }

      .main .grid-demo [class^='col'] .col-inner {
        background-color: var(--ifm-color-emphasis-100);
        padding: 1rem;
        text-align: center;
      }

      .main .row--no-gutters .col-inner {
        border: 1px solid var(--ifm-color-emphasis-300);
      }

      .main .color {
        border-radius: 8px;
        display: inline-block;
        height: 3rem;
        padding: 1rem;
        text-align: center;
        width: 3rem;
      }
      .main .color-contrast {
        display: inline-block;
        margin-left: 2rem;
      }

      .theme-switcher {
        float: right;
      }
    </style>
    <script type="text/javascript">
      if (/dark=true/.test(window.location.search)) {
        document.querySelector('html').setAttribute('data-theme', 'dark');
      }
    </script>
    <link
      id="theme-stylesheet"
      href="css/default/default.min.css"
      type="text/css"
      rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous" />
  </head>
  <body>
    <nav class="navbar navbar--fixed-top">
      <div class="container">
        <div class="navbar__inner">
          <div class="navbar__items">
            <button class="navbar__toggle clean-btn" type="button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="30"
                height="30"
                viewBox="0 0 30 30"
                role="img"
                focusable="false">
                <title>Menu</title>
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-miterlimit="10"
                  stroke-width="2"
                  d="M4 7h22M4 15h22M4 23h22"></path>
              </svg>
            </button>
            <a class="navbar__brand" href="#">
              <div class="navbar__logo">
                <img src="https://infima.dev/img/logo.png" />
              </div>
              <span class="navbar__title text--truncate">Infima</span>
            </a>
            <a class="navbar__item navbar__link" href="#url">Docs</a>
            <a class="navbar__item navbar__link" href="#url">Tutorial</a>
            
          <div class="navbar__items navbar__items--right">
            <a class="navbar__item navbar__link" href="#url">
              <i class="fab fa-github fa-lg"></i>
            </a>
            <form>
              <div class="navbar__search">
                <input class="navbar__search-input" placeholder="Search" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </nav>
    <div class="hero hero--primary text--center">
      <div class="container">
        <h1 class="hero__title">Infima Inputs</h1>
        <p class="hero__subtitle">
          Input components for the Infima UI framework
        </p>
        <div>
          <button class="button button--secondary" id="mode-toggle">
            Toggle Mode (or press
            <kbd>X</kbd>
            )
          </button>
          <button class="button button--secondary" id="minification-toggle">
            Toggle Minification (or press
            <kbd>M</kbd>
            )
          </button>
          <button class="button button--secondary" id="rtl-toggle">
            Toggle RTL (or press
            <kbd>R</kbd>
            )
          </button>
        </div>
      </div>
    </div>
    <div class="main">
      <div class="container">
        <div class="section">
          <h1>
            Navbars
            <a id="navbars" href="#navbars">#</a>
          </h1>
          <div class="row">
            <div class="col">

            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <div class="row footer__links">
          <div class="col footer__col">
            <h4 class="footer__title">Docs</h4>
            <ul class="footer__items clean-list">
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Getting Started</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">API</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">FAQ</a>
              </li>
            </ul>
          </div>
          <div class="col footer__col">
            <h4 class="footer__title">Community</h4>
            <ul class="footer__items clean-list">
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Users</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Contribute</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Stack Overflow</a>
              </li>
            </ul>
          </div>
          <div class="col footer__col">
            <h4 class="footer__title">Social</h4>
            <ul class="footer__items clean-list">
              <li class="footer__item">
                <a class="footer__link-item" href="#url">GitHub</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Facebook</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Twitter</a>
              </li>
            </ul>
          </div>
          <div class="col footer__col">
            <h4 class="footer__title">More</h4>
            <ul class="footer__items clean-list">
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Tutorial</a>
              </li>
              <li class="footer__item">
                <a class="footer__link-item" href="#url">Blog</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="text--center">
          Copyright Â© 2024 Frank Ali
        </div>
      </div>
    </footer>
    <script>
      (() => {

        const html = document.documentElement;
        const themeStyleSheet = document.querySelector('#theme-stylesheet');

        const initialQueryString = new URLSearchParams(window.location.search);

        // Mutable state
        let dark = initialQueryString.get('dark') === 'true';
        let rtl = initialQueryString.get('rtl') === 'true';
        let min = initialQueryString.get('min') === 'true';

        function sync() {
          function syncCSS() {
            const rtlPart = rtl ? '-rtl' : '';
            const minPart = min ? '.min' : '';
            themeStyleSheet.href = `css/default/default${rtlPart}${minPart}.css`;
          }

          function syncQueryString() {
            const params = new URLSearchParams(window.location.search);
            dark ? params.set('dark', true) : params.delete('dark');
            rtl ? params.set('rtl', true) : params.delete('rtl');
            min ? params.set('min', true) : params.delete('min');
            const paramsString = params.toString();
            const newUrl = `${window.location.pathname}${
              paramsString ? `?${paramsString}` : ''
            }${window.location.hash}`;
            history.pushState(null, null, newUrl);
          }

          function syncRTL() {
            html.dir = rtl ? 'rtl' : 'ltr';
          }

          function syncTheme() {
            html.setAttribute('data-theme', dark ? 'dark' : '');
          }

          syncCSS();
          syncQueryString();
          syncRTL();
          syncTheme();
        }

        function toggleMode() {
          dark = !dark;
          sync();
        }

        function toggleMinification() {
          min = !min;
          sync();
        }

        function toggleRTL() {
          rtl = !rtl;
          sync();
        }

        // update the initial html according to initial querystring
        sync();

        document
          .getElementById('mode-toggle')
          .addEventListener('click', toggleMode);
        document
          .getElementById('minification-toggle')
          .addEventListener('click', toggleMinification);
        document
          .getElementById('rtl-toggle')
          .addEventListener('click', toggleRTL);

        window.addEventListener('keydown', function (event) {
          const R_KEYCODE = 81;
          const M_KEYCODE = 77;
          const X_KEYCODE = 88;
          if (event.key === 'x' || event.keyCode === X_KEYCODE) {
            toggleMode();
          }
          if (event.key === 'm' || event.keyCode === M_KEYCODE) {
            toggleMinification();
          }
          if (event.key === 'r' || event.keyCode === R_KEYCODE) {
            toggleRTL();
          }
        });

        // Make colors clickable to copy the hex code
        // Convenient to debug color contrast accessibility issues
        (function setupCopyColorClick() {
          async function copyText(text) {
            const result = await navigator.permissions.query({
              name: 'clipboard-write',
            });
            if (result.state === 'granted' || result.state === 'prompt') {
              await navigator.clipboard.writeText(text);
            }
          }

          // https://stackoverflow.com/a/3627747/82609
          const rgba2hex = (rgba) =>
            `#${rgba
              .match(
                /^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)$/,
              )
              .slice(1)
              .map((n, i) =>
                (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))
                  .toString(16)
                  .padStart(2, '0')
                  .replace('NaN', ''),
              )
              .join('')}`;

          const colorElements = Array.from(
            document.getElementsByClassName('color'),
          );
          colorElements.forEach((colorElement) => {
            const computedStyle = window.getComputedStyle(colorElement);
            const color = rgba2hex(computedStyle.backgroundColor);
            colorElement.setAttribute('alt', `${color} (click to copy)`);
            colorElement.setAttribute('title', `${color} (click to copy)`);
            colorElement.style.cursor = 'pointer';
            colorElement.addEventListener('click', () => {
              // Not sure why, need to redo that to get the good color reliably (otherwise it may copy #ffffff)
              // Looks related to using themed css variables: the good color can only be obtained after stylesheet has loaded?
              const clickedColor = rgba2hex(computedStyle.backgroundColor);
              copyText(clickedColor).catch(console.error);
              console.log('Color copied to clipboard', {
                color,
                clickedColor,
                rgba: computedStyle.backgroundColor,
                var: colorElement.style.backgroundColor,
              });
            });
          });
        })();
      })();
    </script>
  </body>
</html>
